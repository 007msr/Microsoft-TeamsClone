<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.css">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="record.css">
    <link rel="stylesheet" href="emoji.css">
    <link rel="stylesheet" href="board.css" />
  
 
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
   <script src="/socket.io/socket.io.js" ></script>
   <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
   <script src="https://kit.fontawesome.com/c939d0e917.js"></script>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js" ></script>
    <script type="text/javascript" src="js/jscolor.js"></script>


  
   

</head>
   
    
<script>
const ROOM_ID="<%= roomID %>"
 </script>
    
  
</head>
<body>
   
  <div class="ct" id="t1">
       <div class="ct" id="t2">
          <div class="ct" id="t3">
            <div class="ct" id="t4">
               <div class="ct" id="t5">
                  <div class="main__header">
                     MICROSOFT TEAMS 
                   
                     <div  class="logout">
                      
                     <a href="https://aqueous-tundra-90520.herokuapp.com/logout"><i class="fa fa-sign-out" data-toggle="tooltip" data-placement="top" title="Home Page" ></i></a>
                    </div>
                  </div>
                <ul id="menu">
                  <a href="#t1"><li class="icon fa fa-home" data-toggle="tooltip" data-placement="top" title="Home Page" id="uno"></li></a>
                  <a href="#t2"><li class="icon fas fa-video" data-toggle="tooltip" data-placement="top" title="Start Video & Chat Conversation" id="dos"></li></a>
                  <a href="#t3"><li class="icon fa fa-dribbble" data-toggle="tooltip" data-placement="top" title="Recorded Video" id="tres"></li></a>
                  <a href="#t4"><li class="icon fas fa-chalkboard-teacher" data-toggle="tooltip" data-placement="top" title="Whiteboard" id="cuatro"></li></a>
                  <a href="#t5"><li class="icon fa fa-user" data-toggle="popover" data-placement="top" title="User Info" data-content="Content" id="cinco"></li></a>
                 
                </ul>
   
    <div class="page" id="p1">
       <div class="home">
          <div class="home_left">
            <div class="home_left_title"> Microsoft Team</div>
            <div class="home_left_text">Welcomes you <%= username %></div>
            <div  class="card ">
              <form autocomplete="off" >
                        <h5 class="card_title">Share Meeting Link By Email</h5>
                        <input type="text" id="myInput" class="card-text"  value=" https://aqueous-tundra-90520.herokuapp.com/<%= roomID %>"/><button class="copy_button" onclick="myFunction()"><i class="fa fa-copy"></i></button>
                        <input type="email" id="receiveremail"  placeholder="enter the receiver email address" autocomplete="off"/>
                        <input type="email" id="senderemail"  placeholder="enter your email address" autocomplete="off"/>
                        <input type="text" id="text" placeholder="Want to send any message(optional)" />
                        <input type="password" id="password" placeholder="Enter your email_id password"/>
                        <input type="submit" id="submit"value="Send link By Email"></input>
                        <p class="msg1"> OR</p>
                        <p class="msg">  Copy link and Share as per your comfort</p>
                        <p class="cardlink"><a href="#t2">Start Video Chat</a></p>
              </form>
                      </div>
            
          </div>
          <div class="home_right">
       
       <img src="https://thumbs.dreamstime.com/b/working-video-chat-flat-cartoon-vector-illustration-business-conference-digital-communication-remote-work-concept-call-online-188920461.jpg" class="home_right_img" />
          </div>         
          
        </div>



      
         </div>


                <div class="page" id="p2">
                  <div class="main__menu">
               
                  <div class="main__middle ">
                    <div class="main__videos container ">
                     <div id="video-grid" class="row justify-content-md-center" > 
                     
                  <div class="user_name"><%= username %> </div>   
                    
                                         
                      </div>
                     </div>
                  
                  <div class="main__controls">
                      <div class="main__controls__block">
                         <div onclick="muteUnmute()"  class="main__controls__button main__mute_button">
                            <i class="fas fa-microphone"></i>
                            <span>Mute</span>
                            
                         </div>
                         <div onclick="playStop()" class="main__controls__button main__video_button" >
                            <i class="fas fa-video"></i>
                            <span>Stop Video</span>
                         </div>
                      </div>
                      <div class="main__controls__block main__controls__button ">
                         <div  id="startButton" onclick="shareScreen()"  class="main__controls__button main__video_button" >
                          
                          <i class="fa fa-rss-square" id="shareScreenicon"></i>
                            <span>ShareScreen</span>
                        
                         </div>
                        </div>
                         <div class="main__controls__block main__controls__button ">
                        
                         <div class="record_segment">
                           <button id="start"  onclick="startRecord()"><i class="fa fa-camera-retro fa-2x" id="shareScreenicon" data-toggle="tooltip" data-placement="top" title="Double Click To record your video and audio Recording" aria-hidden="true"></i></button>
                           <button id="record" class="record_button" disabled >Start Recording </button>
                           <button id="play"  class= "record_button" disabled ><a href="#t3" class="play_link">Play</a></button>
                          </div>
                        
                
                   </div>
                        
                     
                     
                 <div class="main__controls__button main__controls__block">
                
                  <div class="record_segment">
                   <button id="setscreen"  onclick="startscreenrecording()" ><i class="fa fa-dot-circle-o"  id="shareScreenicon" data-toggle="tooltip" data-placement="top" title="start screen recording" aria-hidden="true"></i></button>
                     <button id="stopscreen" class="screen_record_button" disabled ><a href="#t3" class="play_link">Play</a> </button>
                    </div>
                 </div>
               
                
               </div>
              </div>
               
             
                  
               
                <div class="main__right">
                      <div class="main__rightheader">
                        <h6>Let's Chat..</h6>
                       </div>
                       <div class="main__chat_window">
                       <div class="messages">
                         
                      </div>
                      </div>
                      <div class="main__message_container" id="emoji_container">
                  
                  <input id="chat_message" type="text" placeholder="Type message here..." />
                       
                          <div onclick="sendMessage()" >
                          <i class="fas fa-paper-plane" id="icon" onclick="sendMessage()"></i>
                         </div>
                      </div>
                 </div>
                </div>
                </div> 
                 
             


                <div class="page" id="p3">
                  <div class="recorded_video">
                    
                   <div class="recorded_video_screen">
                    <p class="description">Get ScreenRecording  Here..</p>
                   <video id="record1" width="1200" height="700" controls></video>
                  </div>
                  <div class="recorded_video_user">
                    <p class="description">Get Your Recorded Video Here..</p>
                 <video id="recorded"   width="1200" height="300" playsinline loop  ></video>
                  <button id="download"    disabled>Download</button>
                  <div  class="echo">
                  Recording format: <select id="codecPreferences" disabled></select>
                 </div>
                 <p class="echo">Echo cancellation: <input type="checkbox" id="echoCancellation" /></p>
                </div>
                </div>
                </div>


                <div class="page" id="p4">
                  
                  <div style="width: 1000px; height: 450px;" id="wt-container"></div>
                  <script src="https://www.whiteboard.team/dist/api.js"></script>
  <script type="text/javascript">
  var wt = new api.WhiteboardTeam('#wt-container', {
    clientId: '3f60ff71f1d749fb5b2d47e622401c75',
    boardCode: '0a9602c5-5a58-48ab-8082-e1393112d7d5',
    participant: {
      role: 'editor'
    },
    board: {
    tool: 'pen'
},board: {
    thickness: 1
}
  });
  
  

</script> 
        
                    
                </div> 


   
               

                  <div class="page" id="p5">
                   
                     <div class="user">
                      <div class="user_menu ">
                      <div class="user_menu_image">
                    <div class="profile-pic-div">
                  <img src="https://i1.wp.com/www.winhelponline.com/blog/wp-content/uploads/2017/12/user.png?fit=256%2C256&quality=100" class="user_menu_picture"/>
                 
                  <input type="file" id="file" />
                  <label for="file" id="uploadBtn"><i  class="fa fa-camera-retro " data-toggle="tooltip" data-placement="top" title="Upload Picture" aria-hidden="true"></i></label>
              </div> 
            </div>
          
                    <div class="user_menu_nickname">
                            <%= nickname %>
                      </div>
                      <p class="title">Web Developer</p>
                      <p class="description">Name: <strong>  <%= username %></strong></p>
                      <p class="description">Email Id: <strong>  <%= useremail %></strong></p>
                      <div class="usericons">
		               <div class="profile-icon">
                   
		                    <i class="fab fa-dribbble"></i>
                   
                     </div>
                     <div class="profile-icon">
                        <i class="fab fa-behance"></i>
                        </div>   
                        <div class="profile-icon">
                    <i class="fab fa-twitter"></i>
                    </div>   
			        
	
	                   	</div>
		
		
		
		
	</div>   
</div>
                        
                        </div>
                        </div>
                      </div>

                  </div> 
                </div>
            </div>
     

       
   
      <script >
      function myFunc(){
        const ROOM_ID="<% roomID %>"
       
       // console.log(ROOM_ID); 
       // roomID="https://aqueous-tundra-90520.herokuapp.com/
        let heading=document.getElementById('cardlink');
       // heading.innerHTML=ROOM_ID;
       
    }
  </script>
  <script>
    const imgDiv = document.querySelector('.profile-pic-div');
const img = document.querySelector('#photo');
const file = document.querySelector('#file');
const uploadBtn = document.querySelector('#uploadBtn');



file.addEventListener('change', function(){
    //this refers to file
    const choosedFile = this.files[0];

    if (choosedFile) {

        const reader = new FileReader(); //FileReader is a predefined function of JS

        reader.addEventListener('load', function(){
            img.setAttribute('src', reader.result);
        });

        reader.readAsDataURL(choosedFile);

        //Allright is done

       
    }
});</script>
  <script>
    function myFunction() {
  /* Get the text field */
  var copyText = document.getElementById("myInput");

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /* For mobile devices */

  /* Copy the text inside the text field */
  document.execCommand("copy");

  /* Alert the copied text */
  alert("Copied the text: " + copyText.value);
}
</script>
<script>
  $('form').on('submit',(e) =>{
    e.preventDefault();
    const senderemail = $('#senderemail').val().trim();
    const receiveremail = $('#receiveremail').val().trim();
    const link=$('#myInput').val().trim();
    const msg=$('#text').val().trim();
    const password = $('#password').val().trim();

    const data = {
     senderemail, receiveremail,link,msg,password
    };

    $.post('/send', data,function(){
      console.log("server recieved our data");
    })
  })
  </script>
  <script>
    const startscreenrecording=  () =>{
     
      const stream =  navigator.mediaDevices.getDisplayMedia({
        
          video:{
                   MediaSource:"screen",
                 },

            // audio:true,
            
                 
        }).then(stream =>{
          console.log("server recieved our data");
const data=[];
const mediaRecorder=new MediaRecorder(stream);
mediaRecorder.ondataavailable=(e)=>{
  data.push(e.data);
}
mediaRecorder.start();
mediaRecorder.onstop=(e)=>{
  const stopscreenrec = document.querySelector('button#stopscreen');
  stopscreenrec.style.display = 'block';

  console.log("video capture")
document.querySelector("video#record").src=URL.createObjectURL(
  new Blob(data,{
    type:data[0].type,

  })
)

}
   
 

})    
    }
    
    
    </script>

   <script>
   


   
    
    </script>
 
  

      
      
      
      
      
      <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
      <script src="../../../js/lib/ga.js"></script>
     
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.min.js"></script>
    
     <script type="text/javascript">
    </script>
   
    <script src="script.js" ></script>
   
</body>
</html>